	ORG	0000H
		LJMP	START
	ORG	000BH
		LJMP	TITF0
	ORG	001BH
		LJMP	TITF1
	ORG	0031H
MAIN:	
	ORG	0100H
	START:	MOV	020H, #000H
		MOV	031H, #000H
		MOV	032H, #001
		MOV	033H, #03CH
		MOV	034H, #0B0H
		MOV     TMOD, #00010001B
		SETB	EA
		SETB	ET0
		SETB	ET1
LOOP:		LCALL   INPUT0
		LCALL   OUTPU0
		LJMP    START
INPUT0:		SETB	020H.0
		RET
OUTPU0:		JNB	020H.0, OUNE1
		LCALL	HARPO
	OUNE1:	RET
HARPO:		MOV	031H, #0C3H
		MOV	032H, #005
		LCALL	DELAY
		MOV	031H, #0C6H
		MOV	032H, #005
		LCALL	DELAY
		MOV	031H, #0D1H
		MOV	032H, #003
		LCALL	DELAY
		MOV	031H, #0C7H
		MOV	032H, #004
		LCALL	DELAY
		MOV	031H, #0C6H
		MOV	032H, #010
		LCALL	DELAY
		MOV	031H, #0D3H
		MOV	032H, #010
		LCALL	DELAY
		MOV	031H, #0D2H
		MOV	032H, #015
		LCALL	DELAY
		MOV	031H, #0C7H
		MOV	032H, #015
		LCALL	DELAY
		MOV	031H, #0C6H
		MOV	032H, #005
		LCALL	DELAY
		MOV	031H, #0D1H
		MOV	032H, #003
		LCALL	DELAY
		MOV	031H, #0C7H
		MOV	032H, #004
		LCALL	DELAY
		MOV	031H, #0C5H
		MOV	032H, #010
		LCALL	DELAY
		MOV	031H, #0C7H
		MOV	032H, #010
		LCALL	DELAY
		MOV	031H, #0C3H
		MOV	032H, #010
		LCALL	DELAY
		MOV	031H, #0C1H
		MOV	032H, #005
		LCALL	DELAY
		MOV	031H, #0C3H
		MOV	032H, #005
		LCALL	DELAY
		MOV	032H, #010
		LCALL	DELAY
		RET
DELAY:		MOV	A, 031H
		MOV	R7, 032H
		JZ	DELON
		LCALL	PWMSET
		SETB	TR1
	DELON:  SETB	TR0
	DELTS:  MOV	TH0, 033H
		MOV	TL0, 034H
	DELWA:  JB	TF0, DELFI
		MOV	030H, P1	//?
		AJMP	DELWA
	DELFI:  CLR	TF0
		DJNZ	R7, DELTS
		CLR	TR0
		CLR	TR1
		MOV	031H, #000H
		MOV	032H, #001
		MOV	033H, #03CH
		MOV	034H, #0B0H
		CLR	P2.0
		RET
PWMSET:		MOV	DPTR, #1F07H
		MOV	A, 031H
		MOVC	A, @A+DPTR
		MOV	071H, A
		MOV	DPTR, #1EFFH
		MOV	A, 031H
		MOVC	A, @A+DPTR
		MOV	070H, A
		MOV	TH1, 071H
		MOV	TL1, 070H
		RET
TITF0:		RETI
TITF1:		CLR	TF1
		MOV	TH1, 071H
		MOV	TL1, 070H
		JBC	P2.0, TTF1E
		SETB	P2.0
	TTF1E:	RETI
TABLE:
	ORG	1FB8H
		DB	0F1H, 0F2H, 0F4H, 0F4H, 0F6H, 0F7H, 0F8H, 000H
	ORG	1FB0H
		DB	017H, 0B7H, 02AH, 0D7H, 009H, 01FH, 018H, 000H
	ORG	1FC8H
		DB	0F8H, 0F9H, 0FAH, 0FAH, 0FBH, 0FBH, 0FCH, 000H
	ORG	1FC0H
		DB	08CH, 05BH, 015H, 067H, 004H, 090H, 00CH, 000H
	ORG	1FD8H
		DB	0FCH, 0FCH, 0FDH, 0FDH, 0FDH, 0FDH, 0FEH, 000H
	ORG	1FD0H
		DB	044H, 0ACH, 009H, 034H, 082H, 0C8H, 006H, 000H
        END
