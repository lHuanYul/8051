	ORG	0000H
		LJMP	MAIN
	ORG	000BH
	ORG	0100H
MAIN:		MOV	P0, #0FFH	//LOCKs
		MOV	021H, #0FFH
		MOV	P1, #0FFH	//BUTTON
		MOV	022H, #000H	//BUTTON T07
		MOV	023H, #000H	//BUTTON T8F
		MOV	030H, #000H
		MOV	031H, #000H
		MOV	032H, #000H
		MOV	033H, #000H
		MOV	P2, #0FFH	//LED
		MOV	020H, #0FFH
		MOV	02FH, #000H	//BUFFER
		MOV     TMOD, #00010001B
	START:	LCALL	RESET0
		LCALL	INPUT0
		LCALL	CHECK0
		LCALL	OUTPU0
		LJMP	START
RESET0:		RET
INPUT0:		MOV	R2, #11111100B
		MOV	P3, R2
		JNB	P3.5, BUT0T
		CLR	022H.0
		AJMP	BUT0N
	BUT0T:	JB	022H.0, BUT0N
		SETB	022H.0
		/* PRESS 0 COMMANDS */
		MOV	030H, #000H
		MOV	031H, #000H
		MOV	032H, #000H
		MOV	033H, #000H
	BUT0N:	JNB	P3.4, BUT1T
		CLR	022H.1
		AJMP	BUT1N
	BUT1T:	JB	022H.1, BUT1N
		SETB	022H.1
		/* PRESS 1 COMMANDS */
		LCALL	MOVNUM
		MOV	030H, #00EH
	BUT1N:	JNB	P3.3, BUT2T
		CLR	022H.2
		AJMP	BUT2N
	BUT2T:	JB	022H.2, BUT2N
		SETB	022H.2
		/* PRESS 2 COMMANDS */
		LCALL	MOVNUM
		MOV	030H, #00DH
	BUT2N:	JNB	P3.2, BUT3T
		CLR	022H.3
		AJMP	BUT3N
	BUT3T:	JB	022H.3, BUT3N
		SETB	022H.3
		/* PRESS 3 COMMANDS */
		LCALL	MOVNUM
		MOV	030H, #00CH
	BUT3N:	INC	R2
		MOV	P3, R2
		JNB	P3.5, BUT4T
		CLR	022H.4
		AJMP	BUT4N
	BUT4T:	JB	022H.4, BUT4N
		SETB	022H.4
		/* PRESS 4 COMMANDS */
		LCALL	MOVNUM
		MOV	030H, #00BH
	BUT4N:	JNB	P3.4, BUT5T
		CLR	022H.5
		AJMP	BUT5N
	BUT5T:	JB	022H.5, BUT5N
		SETB	022H.5
		/* PRESS 5 COMMANDS */
		LCALL	MOVNUM
		MOV	030H, #003H
	BUT5N:	JNB	P3.3, BUT6T
		CLR	022H.6
		AJMP	BUT6N
	BUT6T:	JB	022H.6, BUT6N
		SETB	022H.6
		/* PRESS 6 COMMANDS */
		LCALL	MOVNUM
		MOV	030H, #006H
	BUT6N:	JNB	P3.2, BUT7T
		CLR	022H.7
		AJMP	BUT7N
	BUT7T:	JB	022H.7, BUT7N
		SETB	022H.7
		/* PRESS 7 COMMANDS */
		LCALL	MOVNUM
		MOV	030H, #009H
	BUT7N:	INC	R2
		MOV	P3, R2
		JNB	P3.5, BUT8T
		CLR	023H.0
		AJMP	BUT8N
	BUT8T:	JB	023H.0, BUT8N
		SETB	023H.0
		/* PRESS 8 COMMANDS */
		LCALL	MOVNUM
		MOV	030H, #00AH
	BUT8N:	JNB	P3.4, BUT9T
		CLR	023H.1
		AJMP	BUT9N
	BUT9T:	JB	023H.1, BUT9N
		SETB	023H.1
		/* PRESS 9 COMMANDS */
		LCALL	MOVNUM
		MOV	030H, #002H
	BUT9N:	JNB	P3.3, BUTAT
		CLR	023H.2
		AJMP	BUTAN
	BUTAT:	JB	023H.2, BUTAN
		SETB	023H.2
		/* PRESS A COMMANDS */
		LCALL	MOVNUM
		MOV	030H, #005H
	BUTAN:	JNB	P3.2, BUTBT
		CLR	023H.3
		AJMP	BUTBN
	BUTBT:	JB	023H.3, BUTBN
		SETB	023H.3
		/* PRESS B COMMANDS */
		LCALL	MOVNUM
		MOV	030H, #008H
	BUTBN:	INC	R2
		MOV	P3, R2
		JNB	P3.5, BUTCT
		CLR	023H.4
		AJMP	BUTCN
	BUTCT:	JB	023H.4, BUTCN
		SETB	023H.4
		/* PRESS C COMMANDS */
		LCALL	MOVNUM
		MOV	030H, #000H
	BUTCN:	JNB	P3.4, BUTDT
		CLR	023H.5
		AJMP	BUTDN
	BUTDT:	JB	023H.5, BUTDN
		SETB	023H.5
		/* PRESS D COMMANDS */
		LCALL	MOVNUM
		MOV	030H, #001H
	BUTDN:	JNB	P3.3, BUTET
		CLR	023H.6
		AJMP	BUTEN
	BUTET:	JB	023H.6, BUTEN
		SETB	023H.6
		/* PRESS E COMMANDS */
		LCALL	MOVNUM
		MOV	030H, #004H
	BUTEN:	JNB	P3.2, BUTFT
		CLR	023H.7
		AJMP	BUTFN
	BUTFT:	JB	023H.7, BUTFN
		SETB	023H.7
		/* PRESS F COMMANDS */
		LCALL	MOVNUM
		MOV	030H, #007H
	BUTFN:	RET
	MOVNUM:	MOV	033H, 032H
		MOV	032H, 031H
		MOV	031H, 030H
		RET
CHECK0:		MOV	R2, 033H
		CJNE	R2, #001H, CHERR
		MOV	R2, 032H
		CJNE	R2, #002H, CHERR
		MOV	R2, 031H
		CJNE	R2, #003H, CHERR
		MOV	R2, 030H
		CJNE	R2, #004H, CHERR
		CLR	020H.4
		AJMP	CHECO
	CHERR:	SETB	020H.4
	CHECO:	RET
OUTPU0:		MOV	R0, #033H
		MOV	071H, #11110111B
	LIGLO:	MOV	A, 020H
		ANL	071H, A
		MOV	P1, 071H
		MOV	A, @R0
		MOV	DPTR, #0400H
		MOVC	A, @A+DPTR
		CPL	A
		MOV	P2, A
		LCALL	DELAY
		DEC	R0
		ORL	071H, #11110000B
		MOV	A, 071H
		RR	A
		MOV	071H, A
		CJNE	A, #01111111B, LIGLO

		RET
DELAY:		SETB	TR1
		MOV	TH1, #0F8H
		MOV	TL1, #030H
	DELW:   JB	TF1,DELFI
		AJMP	DELW
	DELFI:  CLR	TF1
		CLR	TR1
		RET
TABLE:	
	ORG	0400H
		DB	00111111B
		DB	00000110B
		DB	01011011B
		DB	01001111B
		DB	01100110B
		DB	01101101B
		DB	01111101B
		DB	00000111B
		DB	01111111B
		DB	01101111B
		DB	01110111B
		DB	01111100B
		DB	00111001B
		DB	01011110B
		DB	01111001B
		DB	01110001B
	END