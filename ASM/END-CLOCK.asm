	ORG	0000H
		LJMP	START
	ORG	000BH
		LJMP	STOPT0
MAIN:
	ORG	0100H
	START:	MOV	TMOD, #00010001B
		MOV	030H, #000
		MOV	031H, #000
		MOV	032H, #000
		MOV	033H, #000
		MOV	P0, #0FFH
		MOV	020H, #000H
		MOV	02FH, #000H
		SETB	EA
		SETB	ET0
		SETB	TR0
START:		LCALL	SET0
		LCALL	CHECK0
		LCALL	DISPL0
		LJMP	START
SET0:		JNB	P0.0, SETTR
		CLR	02FH.0
		AJMP	SETRE
	SETTR:	JB	02FH.0, SETRE
		SETB	02FH.0
		JB	02FH.7, SETCL
		SETB	02FH.7
		AJMP	SETRE
	SETCL:	CLR	02FH.7
		MOV	TL0, #0B0H
		MOV	TH0, #03CH
		MOV	030H, #000H
	SETRE:	JB	02FH.7, SETON
		RET
	SETON:	JNB	P0.1, SETT0
		CLR	02FH.1
		AJMP	SETN0
	SETT0:	JB	02FH.1, SETN0
		SETB	02FH.1
		INC	033H
	SETN0:	JNB	P0.2, SETT0
		CLR	02FH.2
		AJMP	SETN0
	SETT1:	JB	02FH.2, SETN0
		SETB	02FH.2
		INC	032H
	SETN1:	JNB	P0.3, SETT0
		CLR	02FH.3
		AJMP	SETN0
	SETT2:	JB	02FH.3, SETN0
		SETB	02FH.3
		INC	031H
	SETN2:	RET
CHECK0:		MOV	A, 030H
		JNB	02FH.7, CHECO
		CJNE	A, #010, CHECO
		MOV	030H, #000
		CLR	02FH.1
		CLR	02FH.2
		CLR	02FH.3
		AJMP	CHECO
		CJNE	A, #020, CHEND
		MOV	030H, #000
		INC	031H
	CHECO:	MOV	A, 031H
		CJNE	A, #060, CHEND
		MOV	031H, #000
		INC	032H
		MOV	A, 032H
		CJNE	A, #060, CHEND
		MOV	032H, #000
		INC	033H
		MOV	A, 033H
		CJNE	A, #024, CHEND
		MOV	033H, #000
	CHEND:	RET
DISPL0:		MOV	R0, #031H
		MOV	R2, #11111110
		JB	02FH.7, SEDIS
		MOV	DPTR, #1F00H
		AJMP	DISLO
	SEDIS:	MOV	DPTR, #1F10H
	DISLO:	MOV	A, @R0
		MOV	B, #010
		DIV	AB
		MOVC	A, @A+DPTR
		MOV	R7, A		;10^1
		MOV	A, B
		MOVC	A, @A+DPTR
		MOV	P1, R2
		MOV	P2, A
		LCALL	DEL2MS
		MOV	A, R2
		RL	A
		MOV	R2, A
		MOV	P1, R2
		MOV	P2, R7
		LCALL	DEL2MS
		MOV	A, R2
		RL	A
		MOV	R2, A
		INC	R0
		CJNE	R0, #034H, DISLO
		RET
DEL2MS:		MOV	R6, #4		;2005us
	DEL0:	MOV	R7, #249
		DJNZ	R7, $
		DJNZ	R6, DEL0
		RET
STOPT0:		MOV	TL0, #0B0H
		MOV	TH0, #03CH
		CLR	TF0
		INC	030H
		RETI
TABLE:
	ORG	1F00H
		DB	3FH, 06H, 5BH, 4FH, 66H, 6DH, 7DH, 07H, 7FH, 6FH, 77H, 7CH, 39H, 5EH, 79H, 71H
	ORG	1F10H
		DB	BFH, 86H, DBH, CFH, E6H, EDH, FDH, 87H, FFH, EFH, F7H, FCH, B9H, 5EH, F9H, F1H
	END
