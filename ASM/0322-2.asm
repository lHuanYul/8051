	ORG	0000H
		LJMP	MAIN
	ORG	000BH
	ORG	0100H
MAIN:		MOV	P0, #0FFH	//LOCKs
		MOV	021H, #000H
		MOV	P1, #0FFH	//BUTTON
		MOV	022H, #000H	//BUTTON T07
		MOV	023H, #000H	//BUTTON T8F
		MOV	030H, #0FFH
		MOV	031H, #0FFH
		MOV	032H, #0FFH
		MOV	033H, #0FFH
		MOV	P2, #0FFH	//LED
		MOV	020H, #00000000B
		MOV	P3, #0FFH
		MOV	02FH, #00H	//BUFFER
		MOV     TMOD, #00010001B
	START:	LCALL	RESET0
		LCALL	INPUT0
		LCALL	OUTPU0
		LJMP	START
RESET0:		MOV	021H, #010H
		MOV	022H, #000H
		MOV	023H, #000H
		RET
INPUT0:		MOV	R2, #11111100B
		MOV	P3, R2
		JNB	P3.7, BUT0T
		CLR	022H.0
		AJMP	BUT0N
	BUT0T:	JB	022H.0, BUT0N
		SETB	022H.0
		/* PRESS 0 COMMANDS */
		/*
		LCALL	MOVNUM
		MOV	030H, #000H
		*/
		MOV	021H, #00FH
	BUT0N:	JNB	P3.4, BUT1T
		CLR	022H.1
		AJMP	BUT1N
	BUT1T:	JB	022H.1, BUT1N
		SETB	022H.1
		/* PRESS 1 COMMANDS */
		MOV	021H, #00EH
	BUT1N:	JNB	P3.3, BUT2T
		CLR	022H.2
		AJMP	BUT2N
	BUT2T:	JB	022H.2, BUT2N
		SETB	022H.2
		/* PRESS 2 COMMANDS */
		MOV	021H, #00DH
	BUT2N:	JNB	P3.2, BUT3T
		CLR	022H.3
		AJMP	BUT3N
	BUT3T:	JB	022H.3, BUT3N
		SETB	022H.3
		/* PRESS 3 COMMANDS */
		MOV	021H, #00CH
	BUT3N:	INC	R2
		MOV	P3, R2
		JNB	P3.7, BUT4T
		CLR	022H.4
		AJMP	BUT4N
	BUT4T:	JB	022H.4, BUT4N
		SETB	022H.4
		/* PRESS 4 COMMANDS */
		MOV	021H, #00BH
	BUT4N:	JNB	P3.4, BUT5T
		CLR	022H.5
		AJMP	BUT5N
	BUT5T:	JB	022H.5, BUT5N
		SETB	02EH.5
		/* PRESS 5 COMMANDS */
		MOV	021H, #003H
	BUT5N:	JNB	P3.3, BUT6T
		CLR	022H.6
		AJMP	BUT6N
	BUT6T:	JB	022H.6, BUT6N
		SETB	022H.6
		/* PRESS 6 COMMANDS */
		MOV	021H, #006H
	BUT6N:	JNB	P3.2, BUT7T
		CLR	022H.7
		AJMP	BUT7N
	BUT7T:	JB	022H.7, BUT7N
		SETB	022H.7
		/* PRESS 7 COMMANDS */
		MOV	021H, #009H
	BUT7N:	INC	R2
		MOV	P3, R2
		JNB	P3.7, BUT8T
		CLR	023H.0
		AJMP	BUT8N
	BUT8T:	JB	023H.0, BUT8N
		SETB	023H.0
		/* PRESS 8 COMMANDS */
		MOV	021H, #00AH
	BUT8N:	JNB	P3.4, BUT9T
		CLR	023H.1
		AJMP	BUT9N
	BUT9T:	JB	023H.1, BUT9N
		SETB	023H.1
		/* PRESS 9 COMMANDS */
		MOV	021H, #002H
	BUT9N:	JNB	P3.3, BUTAT
		CLR	023H.2
		AJMP	BUTAN
	BUTAT:	JB	023H.2, BUTAN
		SETB	023H.2
		/* PRESS A COMMANDS */
		MOV	021H, #005H
	BUTAN:	JNB	P3.2, BUTBT
		CLR	023H.3
		AJMP	BUTBN
	BUTBT:	JB	023H.3, BUTBN
		SETB	023H.3
		/* PRESS B COMMANDS */
		MOV	021H, #008H
	BUTBN:	INC	R2
		MOV	P3, R2
		JNB	P3.7, BUTCT
		CLR	023H.4
		AJMP	BUTCN
	BUTCT:	JB	023H.4, BUTCN
		SETB	023H.4
		/* PRESS C COMMANDS */
		MOV	021H, #000H
	BUTCN:	JNB	P3.4, BUTDT
		CLR	023H.5
		AJMP	BUTDN
	BUTDT:	JB	023H.5, BUTDN
		SETB	023H.5
		/* PRESS D COMMANDS */
		MOV	021H, #001H
	BUTDN:	JNB	P3.3, BUTET
		CLR	023H.6
		AJMP	BUTEN
	BUTET:	JB	023H.6, BUTEN
		SETB	023H.6
		/* PRESS E COMMANDS */
		MOV	021H, #004H
	BUTEN:	JNB	P3.2, BUTFT
		CLR	023H.7
		AJMP	BUTFN
	BUTFT:	JB	023H.7, BUTFN
		SETB	023H.7
		/* PRESS F COMMANDS */
		MOV	021H, #007H
	BUTFN:	RET
OUTPU0:		MOV	070H, #01111111B
		MOV	DPTR, #04E0H	//NUM TABLE POS.START SELECT
		MOV	A, 021H
		MOVC	A, @A+DPTR
		MOV	R2, A
		MOV	DPTR, #0500H	//NUM TABLE POS SELECT
	LIGLO:  MOV	A, R2
		MOVC	A, @A+DPTR
		CPL	A		//SW0&1
		MOV	P2, 070H	//123
		MOV	P1, A		//ABC 1015
		LCALL	DELAY
		INC	R2
		MOV	A, 070H
		RR	A
		MOV	070H, A
		CJNE	A, #01111111B, LIGLO
		RET
DELAY:		SETB	TR1
		MOV	TH1, #0F8H
		MOV	TL1, #030H
	DELW:   JB	TF1,DELFI
		AJMP	DELW
	DELFI:  CLR	TF1
		CLR	TR1
		RET
TAB01:
	ORG	04E0H
		DB	000H
		DB	008H
		DB	010H
		DB	018H
		DB	020H
		DB	028H
		DB	030H
		DB	038H
		DB	040H
		DB	048H
		DB	050H
		DB	058H
		DB	060H
		DB	068H
		DB	070H
		DB	078H
		DB	0F8H
	ORG	0500H
		DB	00111100B
		DB	01111110B
		DB	01100110B
		DB	01100110B
		DB	01100110B
		DB	01100110B
		DB	01111110B
		DB	00111100B
	ORG	0508H
		DB	00011000B
		DB	00111000B
		DB	01111000B
		DB	00011000B
		DB	00011000B
		DB	00011000B
		DB	01111110B
		DB	01111110B
	ORG	0510H
		DB	00111110B
		DB	01111110B
		DB	00000110B
		DB	00111110B
		DB	01111100B
		DB	01100000B
		DB	01111110B
		DB	01111110B
	ORG	0518H
		DB	00111100B
		DB	01111110B
		DB	00000110B
		DB	01111110B
		DB	01111110B
		DB	00000110B
		DB	01111110B
		DB	00111100B
	ORG	0520H
		DB	00100110B
		DB	01100110B
		DB	01100110B
		DB	01111110B
		DB	01111110B
		DB	00000110B
		DB	00000110B
		DB	00000110B
	ORG	0528H
		DB	01111110B
		DB	01111110B
		DB	01100000B
		DB	01111100B
		DB	00111110B
		DB	00000110B
		DB	01111110B
		DB	00111100B
	ORG	0530H
		DB	00111100B
		DB	01111110B
		DB	01100000B
		DB	01111100B
		DB	01111110B
		DB	01100110B
		DB	01111110B
		DB	00111100B
	ORG	0538H
		DB	00111100B
		DB	01111110B
		DB	01100110B
		DB	00000110B
		DB	00000110B
		DB	00000110B
		DB	00000110B
		DB	00000110B
	ORG	0540H
		DB	00111100B
		DB	01111110B
		DB	01100110B
		DB	01111110B
		DB	01111110B
		DB	01100110B
		DB	01111110B
		DB	00111100B
	ORG	0548H
		DB	00111100B
		DB	01111110B
		DB	01100110B
		DB	01111110B
		DB	00111110B
		DB	00000110B
		DB	01111110B
		DB	00111100B
	ORG	0550H
		DB	00111100B
		DB	01111110B
		DB	01100110B
		DB	01100110B
		DB	01111110B
		DB	01111110B
		DB	01100110B
		DB	01100110B
	ORG	0558H
		DB	01100000B
		DB	01100000B
		DB	01100000B
		DB	01111100B
		DB	01111110B
		DB	01100110B
		DB	01111110B
		DB	01111100B
	ORG	0560H
		DB	00111100B
		DB	01111110B
		DB	01100000B
		DB	01100000B
		DB	01100000B
		DB	01100000B
		DB	01111110B
		DB	00111100B
	ORG	0568H
		DB	00000110B
		DB	00000110B
		DB	00000110B
		DB	00111110B
		DB	01111110B
		DB	01100110B
		DB	01111110B
		DB	00111110B
	ORG	0570H
		DB	01111110B
		DB	01111110B
		DB	01100000B
		DB	01111110B
		DB	01111110B
		DB	01100000B
		DB	01111110B
		DB	01111110B
	ORG	0578H
		DB	01111100B
		DB	01111110B
		DB	01100000B
		DB	01111110B
		DB	01111110B
		DB	01100000B
		DB	01100000B
		DB	01100000B
	ORG	05F8H
		DB	00000000B
		DB	00000000B
		DB	00000000B
		DB	00000000B
		DB	00000000B
		DB	00000000B
		DB	00000000B
		DB	00000000B
	END